// lib/util.js by qxxst
export function lowestCombatLevel(ns) {
    let str = ns.getPlayer().skills.strength;
    let def = ns.getPlayer().skills.defense;
    let dex = ns.getPlayer().skills.dexterity;
    let agi = ns.getPlayer().skills.agility;
    return Math.min(str, def, dex, agi);
}
export function sourceFileOwned(ns, sourceFile, level) {
    return ns.getResetInfo().ownedSF.has(sourceFile) && ns.getResetInfo().ownedSF.get(sourceFile) >= level;
}
export function currentBitnode(ns) {
    return ns.getResetInfo().currentNode;
}
export function grossIncomePerSecond(ns) {
    let allSources = ns.getMoneySources().sinceInstall;
    let income1 = allSources.crime + allSources.hacking + allSources.hacknet + allSources.work;
    ns.sleep(1000);
    let income2 = allSources.crime + allSources.hacking + allSources.hacknet + allSources.work;
    return income2 - income1;
}
export function getPorts(ns) {
    let ports = 0;
    if (ns.fileExists("BruteSSH.exe", "home")) {
        ports = ports + 1;
    }
    if (ns.fileExists("FTPCrack.exe", "home")) {
        ports = ports + 1;
    }
    if (ns.fileExists("relaySMTP.exe", "home")) {
        ports = ports + 1;
    }
    if (ns.fileExists("HTTPWorm.exe", "home")) {
        ports = ports + 1;
    }
    if (ns.fileExists("SQLInject.exe", "home")) {
        ports = ports + 1;
    }
    return ports;
}
export function inferredDaedalusRoute(ns) {
    let hackingLevel = ns.getHackingLevel();
    let inferredRoute = null;
    if (lowestCombatLevel(ns) > hackingLevel) {
        inferredRoute = "combat";
    }
    else if (hackingLevel > lowestCombatLevel(ns)) {
        inferredRoute = "hacking";
    }
    else if (hackingLevel == lowestCombatLevel(ns) || hackingLevel == 0 && lowestCombatLevel(ns) == 0) {
        inferredRoute = null;
    }
    return inferredRoute;
}
export function nextMilestone(ns) {
    let hackingLevel = ns.getHackingLevel();
    let hackingMilestoneLevels = [ns.getServer("CSEC").requiredHackingSkill, ns.getServer("avmnite-02h").requiredHackingSkill, ns.getServer("I.I.I.I").requiredHackingSkill, ns.getServer("run4theh111z").requiredHackingSkill, 2500, ns.getServer("w0r1d_d43mon").requiredHackingSkill];
    let combatMilestoneLevels = [30, 75, 200, 300, 850, 1200, 1500];
    let highestMilestone;
    let nextMilestone;
    if (inferredDaedalusRoute(ns) == "hacking" || inferredDaedalusRoute(ns) == null) {
        highestMilestone = Math.max(...hackingMilestoneLevels);
        nextMilestone = hackingMilestoneLevels.find(level => level > hackingLevel);
        if (hackingLevel < highestMilestone) {
            return nextMilestone;
        }
        else {
            return "None :)";
        }
    }
    else {
        highestMilestone = Math.max(...combatMilestoneLevels);
        nextMilestone = combatMilestoneLevels.find(level => level > lowestCombatLevel(ns));
        if (lowestCombatLevel(ns) < highestMilestone) {
            return nextMilestone;
        }
        else {
            return "None :)";
        }
    }
}
export function factionAugsRemaining(ns, faction) {
    let augsRemaining = 0;
    for (let i = 0; i < ns.singularity.getAugmentationsFromFaction(faction).length; i++) {
        if (!ns.singularity.getOwnedAugmentations().includes(ns.singularity.getAugmentationsFromFaction(faction)[i])) {
            augsRemaining = augsRemaining + 1;
        }
    }
    return augsRemaining;
}
export function donationsUnlocked(ns, faction) {
    let favorRequirement = 150;
    if (currentBitnode(ns) == 3) {
        favorRequirement = 75;
    }
    return ns.singularity.getFactionFavor(faction) >= favorRequirement;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ob21lL2xpYi91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHVCQUF1QjtBQUN2QixNQUFNLFVBQVUsaUJBQWlCLENBQUMsRUFBTztJQUNyQyxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUNqRCxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNoRCxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUNsRCxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNoRCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDeEMsQ0FBQztBQUVELE1BQU0sVUFBVSxlQUFlLENBQUMsRUFBTyxFQUFFLFVBQWtCLEVBQUUsS0FBYTtJQUN0RSxPQUFPLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEtBQUssQ0FBQztBQUMzRyxDQUFDO0FBRUQsTUFBTSxVQUFVLGNBQWMsQ0FBQyxFQUFPO0lBQ2xDLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLFdBQVcsQ0FBQztBQUN6QyxDQUFDO0FBRUQsTUFBTSxVQUFVLG9CQUFvQixDQUFDLEVBQU87SUFDeEMsSUFBSSxVQUFVLEdBQW9FLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxZQUFZLENBQUM7SUFDcEgsSUFBSSxP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